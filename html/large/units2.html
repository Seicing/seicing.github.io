<!DOCTYPE html>
<html>
<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1" />

<head>
    <link rel="shortcut icon" href="https://seicing.com/res/favicon.ico" />
    <script language="javascript" src="https://seicing.com/js/defaultall.js"></script>
    <link href="https://seicing.com/css/style_large.css" rel="stylesheet" type="text/css" media="screen" /> 
<title>测试</title>
<link href="https://seicing.com/css/table_dnfclass.css" rel="stylesheet" type="text/css" media="screen" />
<script type="text/javascript" src="https://seicing.com/js/jquery-3.1.1.min.js"></script>
<style>
    .age-button {
        padding: 10px 15px;
        margin: 5px;
        cursor: pointer;
        border: 1px solid #ccc;
        border-radius: 5px;
        background-color: #f0f0f0;
    }

    .age-button.active {
        background-color: #007bff;
        color: white;
        border-color: #007bff;
    }

    #customers {
        width: 100%;
        table-layout: fixed;
        border-collapse: collapse;
    }

    /* 针对所有单元格的基础样式 */
    #customers td,
    #customers th {
        border: 1px solid #ddd;
        padding: 8px;
    }

    /* --- CSS 核心修改 --- */
    /* 使用Flexbox对兵种单元格进行对齐 */
    #customers td:not(:first-child) {
        display: flex;
        align-items: flex-end;
        /* 垂直向下对齐 */
        justify-content: center;
        /* 水平居中对齐 */
    }

    #customers td img {
        /* 移除之前的所有对齐和block属性，让Flexbox全权控制 */
        max-width: 100%;
        /* 保证图片不会超出单元格 */
        height: auto;
    }

    #customers tr:nth-child(even) {
        background-color: #f2f2f2;
    }

    #customers tr:hover {
        background-color: #ddd;
    }
</style>
</head>

<body id='scroll-2'>
    <button id="back-to-top-button">▲</button>
    <div id="wrapper" style="width:1850px ; margin:auto">
        <div id="wrapper2">
            <div id="header" class="container">
                <div id="logo">
                    <H1>
                        <span style="color: #FFFFFF">肥猫的秘密基地</span>
                    </H1>
                </div>
            </div>
            <div id="page">
                <div id="content">
                    <div class="post">
                        <h2 class="title"><a href="#"><b></b></a></h2>
                        <div style="clear: both;">&nbsp;</div>
                        <div class="entry"><div id="age-buttons">
    <button class="age-button active" data-age="1">时代 1</button>
    <button class="age-button" data-age="2">时代 2</button>
    <button class="age-button" data-age="3">时代 3</button>
    <button class="age-button" data-age="4">时代 4</button>
</div>

<br>
<table id="customers">
    <tr>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/CivIcon-Chinese.webp" width="52px"> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/长矛兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/武士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/步弓手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/弩手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/火枪兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/侦察兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/骑手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/骑士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/僧侣.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/诸葛弩手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/火长矛骑兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/掷弹兵.png"></td>
        <td> </td>
        <td> </td>
    </tr>
    <tr>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/CivIcon-ZhuXiLegacy.webp" width="52px"> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/长矛兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/武士.png"></td>
        <td> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/弩手.png"></td>
        <td> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/侦察兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/骑手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/骑士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/僧侣.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/诸葛弩手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/元朝掠夺者.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/掷弹兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/少林僧侣.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/帝国卫队.png"></td>
    </tr>

    <tr>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/CivIcon-Japanese.webp" width="52px"> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/长矛兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/武士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/步弓手.png"></td>
        <td> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/火枪兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/侦察兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/骑手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/骑士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/神道教神主.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/女武艺者.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/大筒兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/忍者.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/女武者.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/骑马旗本武士.png"></td>
    </tr>

    <tr>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/CivIcon-Sengokudaimyo.webp" width="52px"> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/长矛兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/武士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/步弓手.png"></td>
        <td> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/火绳枪足轻.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/侦察兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/日本长枪骑兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/骑士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/一向一揆僧侣.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/金碎棒日本武士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/大筒兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/忍者.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/jpn/大名.png"></td>
        <td> </td>
    </tr>

    <tr>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/CivIcon-Holyromanempire.webp" width="52px"> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/长矛兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/武士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/步弓手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/弩手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/火枪兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/侦察兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/骑手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/骑士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/僧侣.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/国土佣仆.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/黑骑兵.png"></td>
        <td> </td>
        <td> </td>
        <td> </td>
    </tr>
    <tr>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/CivIcon-Orderofthedragon.webp" width="52px"> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/镀金长矛兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/镀金武士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/镀金步弓手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/镀金弩手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/镀金火枪兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/侦察兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/镀金骑手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/镀金骑士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/僧侣.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/hre/镀金国土佣仆.png"></td>
        <td> </td>
        <td> </td>
        <td> </td>
    </tr>


    <tr>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/CivIcon-French.webp" width="52px"> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/长矛兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/武士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/步弓手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/弩手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/火枪兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/侦察兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/骑手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/骑士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/僧侣.png"></td>
        <td> </td>
        <td> </td>
        <td> </td>
        <td> </td>
        <td> </td>
    </tr>
    <tr>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/CivIcon-Jeannedarc.webp" width="52px"> </td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/长矛兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/武士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/步弓手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/弩手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/火枪兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/侦察兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/骑手.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/骑士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/僧侣.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/贞德的骑兵.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/贞德的冠军剑士.png"></td>
        <td><img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/fre/圣女贞德骑士.png"></td>
        <td> </td>
        <td> </td>
    </tr>
</table>

                        </div>
                    </div>
                </div>
                <div id="sidebar" style="position:relative; left:50px">
                    <a href="https://seicing.com/html/index.html"><b>回到首页</b></a><br><br>
                </div>
                <div style="clear: both;">&nbsp;</div>
                <div
                    style="float:right; width:1480px; text-align:right; border-top: 1px dashed #CACACA;position:relative; right:50px">
                    <br>
                    
<a href="https://seicing.com/html/index.html"><b>回到首页</b></a>
                </div>
                <div style="clear: both;">&nbsp;</div>
            </div>

        </div>
    </div>
</body>

<script type="text/javascript">
    $(document).ready(function () {
        // --- 时代切换逻辑 (保持不变) ---
        $('#customers td:not(:first-child) img').each(function () {
            $(this).data('original-src', $(this).attr('src'));
        });

        // 按钮点击事件
        $('.age-button').on('click', function () {
            $('.age-button').removeClass('active');
            $(this).addClass('active');
            var age = $(this).data('age');
            updateImageSources(age);
        });

        function updateImageSources(age) {
            $('#customers td:not(:first-child) img').each(function () {
                var $img = $(this);
                var originalSrc = $img.data('original-src');
                $img.css('visibility', 'visible');
                $img.off('error');
                var extension = originalSrc.substring(originalSrc.lastIndexOf('.'));
                var filename = originalSrc.substring(0, originalSrc.lastIndexOf('.'));
                var newSrc = filename + age + extension;

                // 绑定成功加载事件，成功后才进行缩放计算
                $img.one('load', function () {
                    // 每次成功加载新图片后，重新计算并同步缩放
                    syncImageScales();
                }).attr('src', newSrc).on('error', function () {
                    // 如果带时代的图片失败，尝试加载原始图片
                    $(this).one('load', function () {
                        syncImageScales(); // 原始图片加载成功后也要同步
                    }).attr('src', originalSrc).one('error', function () {
                        // 如果原始图片也失败，则隐藏
                        $(this).css('visibility', 'hidden');
                    });
                });
            });
        }

        // --- 全新、更精确的同步图片缩放逻辑 ---

        // 定义基准图片的原始SRC路径
        var referenceImageSrc = "https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/unit/chi/骑士.png";

        // 1. 存储所有图片的原始尺寸 (在图片加载完后执行)
        $(window).on('load', function () {
            $('#customers td:not(:first-child) img').each(function () {
                if (this.naturalWidth > 0) {
                    $(this).data('natural-width', this.naturalWidth);
                }
            });
            // 页面首次加载完成后，立即执行一次缩放同步
            updateImageSources(1); // 触发默认时代加载和后续的缩放
        });

        // 2. 当窗口大小改变时，重新同步缩放
        $(window).on('resize', function () {
            syncImageScales();
        });

        // 3. 核心函数：同步所有图片的缩放百分比
        function syncImageScales() {
            var $refImage = null;

            // 通过原始src数据来查找基准图片，这比查找当前src更可靠
            $('#customers td:not(:first-child) img').each(function () {
                if ($(this).data('original-src') === referenceImageSrc) {
                    $refImage = $(this);
                    return false; // 找到后退出循环
                }
            });

            if (!$refImage || $refImage.length === 0) return;

            // 使用当前加载图片的naturalWidth，而不是首次加载时缓存的
            var refNaturalWidth = $refImage[0].naturalWidth;

            if (refNaturalWidth > 0) {
                var refCurrentWidth = $refImage.width();

                // 步骤2：计算基准图片的缩放百分比
                var scaleRatio = refCurrentWidth / refNaturalWidth;

                // 步骤3：将这个百分比应用到所有图片
                $('#customers td:not(:first-child) img').each(function () {
                    var $img = $(this);
                    var naturalWidth = this.naturalWidth;

                    if (naturalWidth > 0) {
                        var newWidth = naturalWidth * scaleRatio;
                        $img.css({
                            'width': newWidth + 'px',
                            'max-width': '' // 清除max-width，让JS完全控制
                        });
                    }
                });
            }
        }
    });
</script>

</html>