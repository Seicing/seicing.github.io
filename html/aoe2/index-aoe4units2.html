<!DOCTYPE html>
<html>
<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1" />

<head>
    <link rel="shortcut icon" href="https://seicing.com/res/favicon.ico" />
    <link href="https://seicing.com/css/style.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="https://seicing.com/css/lavi2.css" rel="stylesheet" type="text/css" media="screen" /> 
<title>帝国时代IV 单位建筑</title>
<link href="https://seicing.com/css/table_dnfclass.css" media="screen" rel="stylesheet" type="text/css">
<link href="https://seicing.com/css/table.css" rel="stylesheet" type="text/css" media="screen" />
<style>
    #customers2 {
        border-collapse: collapse;
    }

    #customers2 td,
    #customers2 th {
        text-align: center;
        border: 1px solid #888888;
        color: #000000;
        padding: 3px 7px 2px 7px;
    }

    #customers2 tr.alt td {
        color: #000000;
        background-color: #F5F8FA;
    }
</style>
<link href="https://seicing.com/css/link.css" rel="stylesheet" type="text/css" media="screen" />
<script type="text/javascript" src="https://seicing.com/js/jquery-3.1.1.min.js"></script>
<script type="text/javascript" src="https://seicing.com/js/vue3.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#sidebar').load('https://seicing.com/js/list/AoeOfEmpires.html');
    })
</script>
</head>

<body id='scroll-2'>
    <div id="wrapper" style="width:1280px ; margin:auto">
        <div id="wrapper2">
            <div id="header" class="container">
                <div id="logo">
                    <H1>
                        <span style="color: #FFFFFF">肥猫的秘密基地</span>
                    </H1>
                </div>

            </div>
            <div id="page">
                <div id="content">
                    <div class="post">
                        <h2 class="title"><a href="#"><b></b></a></h2>
                        <div style="clear: both;">&nbsp;</div>
                        <div class="entry"><div id="lavipage" page="42"></div>
<div class="civ-selector">
    <a id="abbButton0" onclick="showCiv('abb')" style="opacity:1">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/abb.png" width="25px"></a>
    <a id="chiButton0" onclick="showCiv('chi')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/chi.png" width="25px"></a>
    <a id="engButton0" onclick="showCiv('eng')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/eng.png" width="25px"></a>
    <a id="freButton0" onclick="showCiv('fre')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/fre.png" width="25px"></a>
    <a id="rusButton0" onclick="showCiv('rus')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/rus.png" width="25px"></a>
    <a id="hreButton0" onclick="showCiv('hre')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/hre.png" width="25px"></a>
    <a id="monButton0" onclick="showCiv('mon')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/mon.png" width="25px"></a>
    <a id="sulButton0" onclick="showCiv('sul')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/sul.png" width="25px"></a>
    <a id="ottButton0" onclick="showCiv('ott')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/ott.png" width="25px"></a>
    <a id="malButton0" onclick="showCiv('mal')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/mal.png" width="25px"></a>
    <a id="jpnButton0" onclick="showCiv('jpn')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/jpn.png" width="25px"></a>
    <a id="byzButton0" onclick="showCiv('byz')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/byz.png" width="25px"></a>

    <a id="ayyButton0" onclick="showCiv('ayy')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/ayy.png" width="25px"></a>
    <a id="zxlButton0" onclick="showCiv('zxl')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/zxl.png" width="25px"></a>
    <a id="holButton0" onclick="showCiv('hol')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/hol.png" width="25px"></a>
    <a id="jdaButton0" onclick="showCiv('jda')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/jda.png" width="25px"></a>
    <a id="kcrButton0" onclick="showCiv('kcr')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/kcr.png" width="25px"></a>
    <a id="otdButton0" onclick="showCiv('otd')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/otd.png" width="25px"></a>
    <a id="gohButton0" onclick="showCiv('goh')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/goh.png" width="25px"></a>
    <a id="tugButton0" onclick="showCiv('tug')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/tug.png" width="25px"></a>
    <a id="senButton0" onclick="showCiv('sen')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/sen.png" width="25px"></a>
    <a id="macButton0" onclick="showCiv('mac')" style="opacity:0.3">
        <img src="https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/civicon/mac.png" width="25px"></a>
</div>
<br>
<div id="aoe4page">
    <div :id="`${civ}Text0`" style="text-align:left;">
        <table id="customers2" frame="box" width="780px">
            <tr v-for="sec in sections" :key="sec">
                <td style="background-color:#F5F8FA;width:50px">{{ sec }}</td>
                <td style="text-align:left">
                    <table v-for="unit in civItems.filter(i => i.section === sec)" :key="unit.name"
                        style="border-collapse:collapse;float:left">
                        <tr>
                            <td width="48px" height="48px" style="border:0;">
                                <a :href="`${unit.link}.html?civ=${unit.civ}`">
                                    <img :src="`https://data.seicing.com/seicingdepot/3fatcatpool/aoe4/tech/${unit.img}.png`" width="48px">
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td width="48px" style="border:0;text-align:center">
                                <a :href="`${unit.link}.html?civ=${unit.civ}`" style="color:#0010ff">{{ unit.name }}</a>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </div>
</div>
                        </div>
                        <div class="izl-rmenu">
                            <a href="#">
                                <div class="btn_top"> </div>
                            </a>
                        </div>
                    </div>
                </div>
                <div id="sidebar" style="position:relative; left:-20px">
                    
                </div>
                <div style="clear: both;">&nbsp;</div>
                <div style="float:right; width:850px; text-align:right; border-top: 1px dashed #CACACA;"><br>
                    
<a href="https://seicing.com/html/index.html"><b>回到首页</b></a>
                </div>
                <div style="clear: both;">&nbsp;</div>

            </div>

        </div>
    </div>
</body>

<script language="javascript" src="https://seicing.com/js/tech.js"></script>
<script language="javascript" src="https://seicing.com/js/aoe4button.js"></script>

<script type="module">
    // 假设 aoe4list_chi.js 总是存在，并且我们将其作为默认导入
    import { aoe4list as defaultAoe4List } from "https://seicing.com/js/aoe4civ/aoe4list_chi.js";

    const app = Vue.createApp({
        data() {
            return {
                civ: "chi", // 默认文明设置为 'chi'
                aoe4list: defaultAoe4List // 初始化时就加载中国的数据
            };
        },
        computed: {
            civItems() {
                return this.aoe4list.filter(item => item.civ === this.civ);
            },
            sections() {
                return [...new Set(this.civItems.map(i => i.section))];
            }
        },
        methods: {
            async showCiv(civ) {
                // 如果点击的已经是当前文明，则不执行任何操作
                if (civ === this.civ) return;

                // 更新URL，这会触发浏览器历史记录的改变
                const url = new URL(window.location);
                url.searchParams.set('civ', civ);
                window.history.pushState({}, '', url);

                // 调用方法来加载新数据
                await this.loadCivData(civ);

                // 更新按钮的视觉状态
                document.querySelectorAll(".civ-selector a").forEach(a => a.style.opacity = 0.3);
                document.getElementById(civ + "Button0").style.opacity = 1;
            },
            async loadCivData(civ) {
                this.civ = civ;
                try {
                    // 如果要加载的是 chi，我们已经有数据了，可以直接使用
                    if (civ === 'chi') {
                        this.aoe4list = defaultAoe4List;
                        return;
                    }
                    // 动态导入对应文明的模块
                    const module = await import(`https://seicing.com/js/aoe4civ/aoe4list_${civ}.js`);
                    this.aoe4list = module.aoe4list;
                } catch (error) {
                    console.error(`加载 ${civ} 的数据失败，已回退到默认的中国数据:`, error);
                    // 如果加载失败，则回退到中国的数据
                    this.civ = 'chi'; // 将当前文明状态也重置为'chi'
                    this.aoe4list = defaultAoe4List;

                    // 并且更新URL，以反映当前显示的是'chi'
                    const url = new URL(window.location);
                    url.searchParams.set('civ', 'chi');
                    window.history.pushState({}, '', url);
                }
            }
        },
        created() {
            // 组件创建时，从URL获取初始的civ值
            const urlParams = new URLSearchParams(window.location.search);
            const civFromUrl = urlParams.get('civ');

            // 如果URL中有civ参数且不是'chi'，则尝试加载它
            if (civFromUrl && civFromUrl !== 'chi') {
                this.loadCivData(civFromUrl).then(() => {
                    // 数据加载完成后，更新按钮状态
                    document.querySelectorAll(".civ-selector a").forEach(a => a.style.opacity = 0.3);
                    document.getElementById(this.civ + "Button0").style.opacity = 1;
                });
            } else {
                // 否则，默认显示'chi'，并设置按钮状态
                document.querySelectorAll(".civ-selector a").forEach(a => a.style.opacity = 0.3);
                document.getElementById('chiButton0').style.opacity = 1;
            }
        }
    });

    app.mount("#aoe4page");
</script>

</html>